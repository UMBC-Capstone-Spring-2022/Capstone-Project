<!DOCTYPE HTML>
<!--
	Massively by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>DS606 SP23 Team E</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">
						<a href="index.html" class="logo">Team E</a>
					</header>

				<!-- Nav -->
					<nav id="nav">
						<ul class="links">
							<li><a href="index.html">Phase I</a></li>
							<li class="active"><a href="phase_ii.html">Phase II</a></li>
							<li><a href="phase_iii.html">Phase III</a></li>
						</ul>
						<!-- <ul class="icons">
							<li><a href="#" class="icon brands fa-twitter"><span class="label">Twitter</span></a></li>
							<li><a href="#" class="icon brands fa-facebook-f"><span class="label">Facebook</span></a></li>
							<li><a href="#" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
							<li><a href="#" class="icon brands fa-github"><span class="label">GitHub</span></a></li>
						</ul> -->
					</nav>

				<!-- Main -->
					<div id="main">

						<!-- Post -->
							<section class="post">
								<header class="major">
									<span class="date">Exploratory DA & <br> Model Construction</span>

									<h2> MURA X-Ray Classification Using Deep Learning</h2>

									<!-- <p>Aenean ornare velit lacus varius enim ullamcorper proin aliquam<br />
									facilisis ante sed etiam magna interdum congue. Lorem ipsum dolor<br />
									amet nullam sed etiam veroeros.</p> -->
								</header>
								<div class="image main"><a href="#" class="image fit"><img src="images/nn1.jpeg" alt="" /></a></div>

								<a href="#"><h2><center>Our Analysis</center></h2></a>

								<p>We intend to create a deep-learning model that can reliably classify images as normal or abnormal.
									Our deep-learning model will also be able to classify the x-rays by body part (i.e., elbow, finger, hand, humerus, forearm, shoulder, or wrist).
									We want to use a Vision Transformer (ViT) to classify the images. Based on the paper <a href = "https://openreview.net/pdf?id=YicbFdNTTy" target="_blank">An Image Is Worth 16x16 Words: Transformers for Image Recognition at Scale</a>, ViT performed well compared to state-of-the-art convolutional neural networks. We want to test this hypothesis on our MURA dataset.
									We plan to build a neural network, either a Convolution Neural Network (CNN) or Dense Convolution Network or Residual neural network (RNN). We also want to try ensembling neural networks. We will train multiple models and combine the predictions from these models to obtain better results.</p>
								<!-- <p>Donec eget ex magna. Interdum et malesuada fames ac ante ipsum primis in faucibus. Pellentesque venenatis dolor imperdiet dolor mattis sagittis. Praesent rutrum sem diam, vitae egestas enim auctor sit amet. Pellentesque leo mauris, consectetur id ipsum sit amet, fergiat. Pellentesque in mi eu massa lacinia malesuada et a elit. Donec urna ex, lacinia in purus ac, pretium pulvinar mauris. Nunc lorem mauris, fringilla in aliquam at, euismod in lectus. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Curabitur sapien risus, commodo eget turpis at, elementum convallis enim turpis, lorem ipsum dolor sit amet nullam.</p>
								<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis dapibus rutrum facilisis. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Etiam tristique libero eu nibh porttitor fermentum. Nullam venenatis erat id vehicula viverra. Nunc ultrices eros ut ultricies condimentum. Mauris risus lacus, blandit sit amet venenatis non, bibendum vitae dolor. Nunc lorem mauris, fringilla in aliquam at, euismod in lectus. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. In non lorem sit amet elit placerat maximus. Pellentesque aliquam maximus risus. Donec eget ex magna. Interdum et malesuada fames ac ante ipsum primis in faucibus. Pellentesque venenatis dolor imperdiet dolor mattis sagittis. Praesent rutrum sem diam, vitae egestas enim auctor sit amet. Pellentesque leo mauris, consectetur id ipsum.</p> -->
							
								<!-- <a href="#"><h2><center>Evaluation Metrics</center></h2></a>

								<p>We plan to implement multiple methods to evaluate the accuracy of our model, including: </p>
								<ul>
									<li>Changing the batch size and epochs to analyze the performance </li>
									<li>Employing accuracy and precision metrics to assess the performance of our base and Vision Transformer (ViT) model</li> -->
									<!-- <li>Utilizing the ROC curve that displays the trade-off between TPR and TNR for the different classification models</li> -->
									<!-- <li>Employing Class Activation Mapping (CAM) to identify the discriminative regions that would influence the deep learning model to make a prediction</li> -->
								</ul>
							</section>

							<section>
								<a href="#"><h2><center>Exploratory Data Analysis</center></h2></a>

								<!-- <a href="#"><img src="images/viz1.png" width="500" height="600"></a>
								<a href="#"><img src="images/viz4.png" width="500" height="600"></a>
								<a href="#"><img src="images/viz2.png" width="1000" height="800"></a> -->
								
								<table border=0>
									<tr>
									  <td bgcolor= "#FFFFFF">
										<a href="#" class="image fit"><img src="images/viz1.png" width="300" height="350"></a>
									  </td>
									  <td bgcolor= "#FFFFFF">
										<a href="#" class="image fit"><img src="images/viz4.png" width="300" height="350"></a>
									  </td>
									  <td bgcolor= "#FFFFFF">
										<a href="#" class="image fit"><img src="images/viz2.png" width="300" height="350"></a>
									  </td>
									</tr>
								</table>
								<p>We explored our dataset using python, mainly by visualizing the image count by region, study type, and combined. See a code snippet of our core programming code that created the plots and charts above.</p>

								<pre><code>
									
# function to get patient count by study type and region with visulization
def type_region(df):  
stack = df.groupby(['region', 'study_type']).count()['image_path'].reset_index()
stack.columns = ['Region','Study Type','Count']
stack_neg = stack[stack['Study Type'] == 'normal']
stack_pos = stack[stack['Study Type'] == 'abnormal']
stack_all = stack_pos.merge(stack_neg, on = 'Region', how = 'left')
stack_all['Count_z'] = stack_all['Count_x'] + stack_all['Count_y']
display(stack_all)

# patient count by study type and region stacked bargraph
fig, ax = plt.subplots(figsize = (8,8))

x = stack_all['Region']
y1 = stack_all['Count_x']
y2 = stack_all['Count_y']
y3 = stack_all['Count_z']

ax.barh(x, y1, color = '#A8D3E3', label = 'Abnormal')
ax.barh(x, y2, left = y1, color = '#0097a7', label = 'Normal')
container = ax.containers[0]
container2 = ax.containers[1]
ax.bar_label(container, labels = [' ' + f'{x:,.0f}' for x in container.datavalues], style = 'italic', fontsize = 12, label_type = 'center')
ax.bar_label(container2, labels = [' ' + f'{x:,.0f}' for x in container2.datavalues], style = 'italic', fontsize = 12, label_type = 'center')
ax.xaxis.set_major_formatter(mpl.ticker.StrMethodFormatter('{x:,.0f}'))
ax.tick_params(axis = 'both', which = 'major', labelsize = 12)
ax.set_xlabel('Image Count', fontsize = 14, weight = 'bold')
ax.set_ylabel('Region', fontsize = 14, weight = 'bold')
#ax.set_yticks(x, rotation = 90)
ax.spines['right'].set_visible(False)
ax.spines['top'].set_visible(False)
ax.spines['left'].set_visible(True)
ax.spines['bottom'].set_visible(False)
plt.tick_params(left = False, bottom = False)
plt.title('Image Count by Study Type and Region', fontsize = 14, weight = 'bold')
ax.legend()

plt.show()
									</code></pre>

								<a href="#"><h2><center>Data Pre-Processing</center></h2></a>
								<p>The data has already been split into a training (92%) and testing (8%) set by the authors of the dataset. 
									In order to further prepare the images for model ingestion, we took the following steps:</p>
								<ul>
									<li>Transformed all images to grayscale</li>
									<li>Changed the number of channels to 3 for ViT and 1 for base model</li>
									<li>Converted ranges of pixel values between [0.0, 1.0]</li>
									<li>Changed all image shapes to 224x224</li>
									<li>ViT Normalized images with mean (0.5, 0.5, 0.5) and standard deviation (0.5, 0.5, 0.5)</li>
								</ul>
								<a href="#"><h2><center>Model Construction</center></h2></a>

								<table border=0>
									<tr>
									  <td bgcolor= "#FFFFFF">
										<a href="#"><h3><center>Base Model</center></h3></a>
										<ul>
											<li>We implemented the TinyVgg architecture </li>
											<li>We have two convalutional layers and a max pooling layer in each stack with a stack size of 2</li>
											<li>We wanted a simple CNN to compare our initial ViT results to</li>
											<li>We trained the model intially with batch_size = 32 and 5 epochs</li>
										</ul>
									  </td>
									  <td bgcolor= "#FFFFFF">
										<a href="#"><h3><center>ViT Model</center></h3></a>
										<ul>
											<li>We fine-tuned the pretrained model google vit base patch16-224-in21k on our dataset</li>
											<li>This Vision Transformer (ViT) was pre-trained on ImageNet-21k, which has 14 million images</li>
											<li>Images are presented to the model as a sequence of fixed-size patches, which are linearly embedded</li>
											<li>We changed all image shapes to 224 x 224</li>
											<li>We started with batch_size = 32 and 4 epochs</li>
										</ul>
									  </td>
									</tr>
								</table>

								<a href="#"><h2><center>Preliminary Results</center></h2></a>
								<p>Insert Text Here</p>

								<a href="#"><h2><center>Model Evaluation</center></h2></a>

								<p>We implemented multiple methods to evaluate the accuracy of our model, including: </p>
								<ul>
									<li>Changing the batch size and epochs to analyze the model performance </li>
									<li>Employing accuracy and precision metrics to assess the performance of our base and Vision Transformer (ViT) model</li>

								<table>
									<tr>
										<th bgcolor="#0097a7"><font color="#fff">Body Part</font></th>
										<th bgcolor="#0097a7"><font color="#fff">ViT Test Accuracy</font></th>
									</tr>
									<tr>
										<td>Wrist</td>
										<td>80.7%</td>
									</tr>
									<tr>
										<td>Forearm</td>
										<td>74.7%</td>
									</tr>
									<tr>
										<td>Humerus</td>
										<td>80.2%</td>
									</tr>
									<tr>
										<td>Elbow</td>
										<td>71.5%</td>
									</tr>
									<tr>
										<td>Finger</td>
										<td>67.0%</td>
									</tr>
									<tr>
										<td>Shoulder</td>
										<td>TBD</td>
									</tr>
									<tr>
										<td>Hand</td>
										<td>TBD</td>
									</tr>
									</table>
									
									<!-- 							
								<table> 
									<tr> 
										<td><a href="#"></a><img src="images/viz1.png"></a></td> 
										<td><a href="#"></a><img src="images/viz2.jpg"></a></td> 
									</tr> 
									<tr> 
										<td><a href="#"></a><img src="images/viz3.jpg"></a></td> 
										<td><a href="#"></a><img src="images/viz4.jpg"></a></td> 
									</tr> 
								</table>  -->

							</section>
							
					</div>

				<!-- Footer -->
					<!-- <footer id="footer">
						<section>
							<form method="post" action="#">
								<div class="fields">
									<div class="field">
										<label for="name">Name</label>
										<input type="text" name="name" id="name" />
									</div>
									<div class="field">
										<label for="email">Email</label>
										<input type="text" name="email" id="email" />
									</div>
									<div class="field">
										<label for="message">Message</label>
										<textarea name="message" id="message" rows="3"></textarea>
									</div>
								</div>
								<ul class="actions">
									<li><input type="submit" value="Send Message" /></li>
								</ul>
							</form>
						</section>
						<section class="split contact">
							<section class="alt">
								<h3>Address</h3>
								<p>1234 Somewhere Road #87257<br />
								Nashville, TN 00000-0000</p>
							</section>
							<section>
								<h3>Phone</h3>
								<p><a href="#">(000) 000-0000</a></p>
							</section>
							<section>
								<h3>Email</h3>
								<p><a href="#">info@untitled.tld</a></p>
							</section>
							<section>
								<h3>Social</h3>
								<ul class="icons alt">
									<li><a href="#" class="icon brands alt fa-twitter"><span class="label">Twitter</span></a></li>
									<li><a href="#" class="icon brands alt fa-facebook-f"><span class="label">Facebook</span></a></li>
									<li><a href="#" class="icon brands alt fa-instagram"><span class="label">Instagram</span></a></li>
									<li><a href="#" class="icon brands alt fa-github"><span class="label">GitHub</span></a></li>
								</ul>
							</section>
						</section>
					</footer> -->

				<!-- Copyright -->
					<div id="copyright">
						<ul><li>&copy; Untitled</li><li>Design: <a href="https://html5up.net">HTML5 UP</a></li></ul>
					</div>

			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>